{
	"name": "SQL script 2",
	"properties": {
		"content": {
			"query": "SELECT DISTINCT pr.principal_id, pr.name AS [UserName], pr.type_desc AS [User_or_Role], pr.authentication_type_desc AS [Auth_Type], pe.state_desc,\n  pe.permission_name, pe.class_desc, o.[name] AS 'Object'FROM sys.database_principals AS pr \n    JOIN sys.database_permissions AS pe ON pe.grantee_principal_id = pr.principal_id\n    LEFT JOIN sys.objects AS o on (o.object_id = pe.major_id);\n\nselect * from dbo.emp_data_march;\n\nCREATE TABLE dbo.test_table\n  (  \n   id int NOT NULL,  \n   lastName varchar(20),  \n   zipCode varchar(6)  \n  ) ;\n\n  insert into dbo.test_table values (1,'rer','errt');\n\n  select * from dbo.test_table;\n\nselect * from dbo.test_table_new;\n\n  create table dbo.test_table_new WITH\n(\n DISTRIBUTION = ROUND_ROBIN\n ,CLUSTERED COLUMNSTORE INDEX\n) as select * from dbo.test_table;\n\nGRANT SELECT ON SCHEMA::dbo TO [user_managed_synapse];\n\nSELECT \n    DP1.name AS DatabaseRoleName\n    ,ISNULL(DP2.name, 'No members') AS DatabaseUserName\n    ,DP2.principal_id\n    ,DP2.create_date\nFROM sys.database_role_members AS DRM  \nRIGHT OUTER JOIN sys.database_principals AS DP1 ON DRM.role_principal_id = DP1.principal_id  \nLEFT OUTER JOIN sys.database_principals AS DP2  ON DRM.member_principal_id = DP2.principal_id  \n--WHERE DP1.type = 'R'\nORDER BY DP1.name, ISNULL(DP2.name, 'No members');\n\n\n\ncreate user [mi-datamodelling] from external provider;\ncreate role role_bz_test_table_access;\ngrant select on object::test_table to [role_bz_test_table_access];\nexec sp_addrolemember 'role_bz_test_table_access','mi-datamodelling';\n\nexec sp_droprolemember 'data_readers','vishwanath.prajapati@blazeclan.com';\ndrop role data_readers;\ndrop user [ravi.goklani@blazeclan.com];\n\n\nexec sp_droprolemember 'db_datareader','eytham.kishore@blazeclan.com';\n\nselect  princ.name\n,       princ.type_desc\n,       perm.permission_name\n,       perm.state_desc\n,       perm.class_desc\n,       object_name(perm.major_id)\nfrom    sys.database_principals princ\nleft join\n        sys.database_permissions perm\non      perm.grantee_principal_id = princ.principal_id\n",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "rtc_dedicated_2",
				"poolName": "rtc_dedicated_2"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}